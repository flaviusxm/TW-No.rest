{"ast":null,"code":"var _jsxFileName = \"D:\\\\TW-No.rest\\\\frontend\\\\src\\\\components\\\\landing_components\\\\content_bar_\\\\SubjectsContent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SubjectsContent({\n  selected_category,\n  setter_subjects,\n  setter_selected_categories\n}) {\n  _s();\n  const [notes, setter_notes] = useState([]);\n  const [loading, setter_loading] = useState(false);\n  const [creating_note, setter_creating_note] = useState(false);\n  const [current_note, setCurrentNote] = useState(null);\n  const [deletingNoteId, setDeletingNoteId] = useState(null);\n  const saveTimer = useRef(null);\n  const lastSavedState = useRef(null);\n  const subjectId = useMemo(() => {\n    var _selected_category$id;\n    return (_selected_category$id = selected_category === null || selected_category === void 0 ? void 0 : selected_category.id) !== null && _selected_category$id !== void 0 ? _selected_category$id : selected_category === null || selected_category === void 0 ? void 0 : selected_category.subject_id;\n  }, [selected_category]);\n  useEffect(() => {\n    const fetch_notes = async () => {\n      if (!subjectId) return;\n      setter_loading(true);\n      try {\n        const resp = await fetch(`http://localhost:5019/subjects/${subjectId}`, {\n          credentials: \"include\"\n        });\n        if (resp.ok) {\n          const data = await resp.json();\n          setter_notes(Array.isArray(data) ? data : []);\n        }\n      } catch (err) {\n        console.error(\"Eroare incarcare note:\", err);\n      } finally {\n        setter_loading(false);\n      }\n    };\n    fetch_notes();\n  }, [subjectId]);\n  const handler_note_click = async note => {\n    try {\n      var _note$id;\n      const id = (_note$id = note.id) !== null && _note$id !== void 0 ? _note$id : note.note_id;\n      const resp = await fetch(`http://localhost:5019/notes/${id}`, {\n        credentials: \"include\"\n      });\n      if (!resp.ok) return;\n      const selected_note = await resp.json();\n      const fullNote = {\n        ...selected_note,\n        subject_id: subjectId,\n        subject_name: selected_category === null || selected_category === void 0 ? void 0 : selected_category.name,\n        tag_id: selected_note.tag_id ? parseInt(selected_note.tag_id) : null // Asiguram ca e numar\n      };\n      setCurrentNote(fullNote);\n      lastSavedState.current = fullNote;\n    } catch (err) {\n      console.error(\"Eroare la click notita:\", err);\n    }\n  };\n  const handler_create_note = async () => {\n    setter_creating_note(true);\n    try {\n      const resp = await fetch('http://localhost:5019/notes', {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          title: 'New Note',\n          subject_id: subjectId,\n          description: '',\n          markdown_content: ''\n        })\n      });\n      if (resp.ok) {\n        const new_note = await resp.json();\n        const withSubject = {\n          ...new_note,\n          subject_id: subjectId,\n          subject_name: selected_category === null || selected_category === void 0 ? void 0 : selected_category.name\n        };\n        setter_notes(prev => [withSubject, ...prev]);\n        setCurrentNote(withSubject);\n        lastSavedState.current = withSubject;\n      }\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setter_creating_note(false);\n    }\n  };\n  const handler_delete_note = async (noteId, e) => {\n    e.stopPropagation();\n    if (!window.confirm('Stergi notita?')) return;\n    setDeletingNoteId(noteId);\n    try {\n      const resp = await fetch(`http://localhost:5019/notes/${noteId}`, {\n        method: \"DELETE\",\n        credentials: \"include\"\n      });\n      if (resp.ok) {\n        setter_notes(prev => prev.filter(n => {\n          var _n$id;\n          return ((_n$id = n.id) !== null && _n$id !== void 0 ? _n$id : n.note_id) !== noteId;\n        }));\n        if ((current_note === null || current_note === void 0 ? void 0 : current_note.id) === noteId) setCurrentNote(null);\n      }\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setDeletingNoteId(null);\n    }\n  };\n  const handler_delete_subject = async () => {\n    if (!window.confirm(`Stergi subiectul \"${selected_category.name}\" si toate notitele?`)) return;\n    try {\n      const resp = await fetch(`http://localhost:5019/subjects/${subjectId}`, {\n        method: \"DELETE\",\n        credentials: \"include\"\n      });\n      if (resp.ok) {\n        setter_subjects(prev => prev.filter(s => {\n          var _s$id;\n          return ((_s$id = s.id) !== null && _s$id !== void 0 ? _s$id : s.subject_id) !== subjectId;\n        }));\n        setter_selected_categories(null);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  useEffect(() => {\n    if (!(current_note !== null && current_note !== void 0 && current_note.id)) return;\n    if (saveTimer.current) clearTimeout(saveTimer.current);\n    saveTimer.current = setTimeout(async () => {\n      if (lastSavedState.current && current_note.title === lastSavedState.current.title && current_note.description === lastSavedState.current.description && current_note.markdown_content === lastSavedState.current.markdown_content && current_note.course_date === lastSavedState.current.course_date && current_note.tag_id === lastSavedState.current.tag_id // <--- IMPORTANT: Verificam TAG\n      ) {\n        return;\n      }\n      try {\n        const resp = await fetch(`http://localhost:5019/notes/${current_note.id}`, {\n          method: 'PUT',\n          credentials: 'include',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            title: current_note.title,\n            description: current_note.description || '',\n            content: current_note.markdown_content,\n            course_date: current_note.course_date,\n            subject_id: subjectId,\n            tag_id: current_note.tag_id || null // <--- IMPORTANT: Trimitem TAG\n          })\n        });\n        if (resp.ok) {\n          const updated = await resp.json();\n          const merged = {\n            ...current_note,\n            ...updated\n          };\n          lastSavedState.current = merged;\n          setter_notes(prev => prev.map(n => {\n            var _n$id2;\n            return ((_n$id2 = n.id) !== null && _n$id2 !== void 0 ? _n$id2 : n.note_id) === merged.id ? merged : n;\n          }));\n        }\n      } catch (e) {\n        console.error('Autosave error', e);\n      }\n    }, 800);\n    return () => clearTimeout(saveTimer.current);\n  }, [current_note]);\n\n  // --- VIEW 1\n  if (current_note) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 bg-gray-50 p-6 overflow-auto h-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentNote(null),\n        className: \"mb-4 px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded flex items-center gap-1\",\n        children: \"\\u2190 Back to List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-sm border p-6 space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-6 items-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: current_note.title || '',\n              onChange: e => setCurrentNote(prev => ({\n                ...prev,\n                title: e.target.value\n              })),\n              className: \"w-full text-2xl font-bold border-b-2 border-gray-200 focus:border-[#4E8DC4] outline-none pb-2\",\n              placeholder: \"Note title...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-1/4 min-w-[150px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Tag\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: current_note.tag_id || \"\",\n              onChange: e => {\n                const val = e.target.value;\n                setCurrentNote(prev => ({\n                  ...prev,\n                  tag_id: val === \"\" ? null : parseInt(val)\n                }));\n              },\n              className: \"w-full text-lg border-b-2 border-gray-200 pb-2 bg-transparent focus:border-[#4E8DC4] outline-none cursor-pointer\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- Select --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"Curs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"Seminar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"Diverse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: current_note.description || '',\n              onChange: e => setCurrentNote(prev => ({\n                ...prev,\n                description: e.target.value\n              })),\n              className: \"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4E8DC4] outline-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-48\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Course Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: current_note.course_date || '',\n              onChange: e => setCurrentNote(prev => ({\n                ...prev,\n                course_date: e.target.value\n              })),\n              className: \"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4E8DC4] outline-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: current_note.markdown_content || '',\n            onChange: e => setCurrentNote(prev => ({\n              ...prev,\n              markdown_content: e.target.value\n            })),\n            rows: 16,\n            className: \"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#4E8DC4] outline-none font-mono text-sm\",\n            placeholder: \"Start typing...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, this);\n  }\n\n  // --- VIEW 2\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-1 bg-gray-50 p-6 overflow-auto h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 flex justify-between items-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold text-gray-800\",\n          children: selected_category.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 text-sm\",\n          children: [notes.length, \" notes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handler_delete_subject,\n        className: \"text-red-500 hover:bg-red-50 p-2 rounded\",\n        title: \"Delete Subject\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-5 h-5\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 100\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handler_create_note,\n      disabled: creating_note,\n      className: \"mb-6 w-full py-2 bg-[#4E8DC4] text-white rounded-lg hover:bg-[#3b78a2] transition flex justify-center gap-2 items-center\",\n      children: creating_note ? \"Creating...\" : \"+ New Note\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-gray-500\",\n      children: \"Loading notes...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 24\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"space-y-3\",\n      children: notes.map(note => {\n        var _note$id2;\n        const noteId = (_note$id2 = note.id) !== null && _note$id2 !== void 0 ? _note$id2 : note.note_id;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: () => handler_note_click(note),\n          className: \"bg-white p-4 rounded-lg shadow-sm border hover:border-[#4E8DC4] cursor-pointer group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-start mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 flex-wrap\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-gray-800\",\n                  children: note.title || 'Untitled'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 45\n                }, this), note.tag_name && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"bg-blue-100 text-[#4E8DC4] text-xs px-2 py-0.5 rounded-full border border-blue-200 font-medium\",\n                  children: note.tag_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 41\n              }, this), note.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500 mt-1\",\n                children: note.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 62\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => handler_delete_note(noteId, e),\n              className: \"text-red-500 hover:text-red-700 ml-2\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-4 h-4\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 120\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 pt-2 border-t flex justify-between text-xs text-gray-400\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: note.course_date ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"flex items-center gap-1 text-[#4E8DC4]\",\n                children: note.course_date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 45\n              }, this) : \"No date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Updated: \", new Date(note.updated_at).toLocaleDateString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 33\n          }, this)]\n        }, noteId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 17\n    }, this), notes.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-gray-400 mt-10\",\n      children: \"No notes in this subject yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 48\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 9\n  }, this);\n}\n_s(SubjectsContent, \"FeWLbVjQAdl7MAkaUd9hTJJtchc=\");\n_c = SubjectsContent;\nvar _c;\n$RefreshReg$(_c, \"SubjectsContent\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","jsxDEV","_jsxDEV","SubjectsContent","selected_category","setter_subjects","setter_selected_categories","_s","notes","setter_notes","loading","setter_loading","creating_note","setter_creating_note","current_note","setCurrentNote","deletingNoteId","setDeletingNoteId","saveTimer","lastSavedState","subjectId","_selected_category$id","id","subject_id","fetch_notes","resp","fetch","credentials","ok","data","json","Array","isArray","err","console","error","handler_note_click","note","_note$id","note_id","selected_note","fullNote","subject_name","name","tag_id","parseInt","current","handler_create_note","method","headers","body","JSON","stringify","title","description","markdown_content","new_note","withSubject","prev","handler_delete_note","noteId","e","stopPropagation","window","confirm","filter","n","_n$id","handler_delete_subject","s","_s$id","clearTimeout","setTimeout","course_date","content","updated","merged","map","_n$id2","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","target","placeholder","val","rows","length","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","disabled","_note$id2","tag_name","Date","updated_at","toLocaleDateString","_c","$RefreshReg$"],"sources":["D:/TW-No.rest/frontend/src/components/landing_components/content_bar_/SubjectsContent.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\n\r\nexport default function SubjectsContent({ selected_category, setter_subjects, setter_selected_categories }) {\r\n\r\n    const [notes, setter_notes] = useState([]);\r\n    const [loading, setter_loading] = useState(false);\r\n    const [creating_note, setter_creating_note] = useState(false);\r\n    const [current_note, setCurrentNote] = useState(null); \r\n    const [deletingNoteId, setDeletingNoteId] = useState(null);\r\n\r\n    const saveTimer = useRef(null);\r\n    const lastSavedState = useRef(null);\r\n\r\n    const subjectId = useMemo(() => selected_category?.id ?? selected_category?.subject_id, [selected_category]);\r\n\r\n    useEffect(() => {\r\n        const fetch_notes = async () => {\r\n            if (!subjectId) return;\r\n            setter_loading(true);\r\n            try {\r\n                const resp = await fetch(`http://localhost:5019/subjects/${subjectId}`, { credentials: \"include\" });\r\n                if (resp.ok) {\r\n                    const data = await resp.json();\r\n                    setter_notes(Array.isArray(data) ? data : []);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Eroare incarcare note:\", err);\r\n            } finally {\r\n                setter_loading(false);\r\n            }\r\n        }\r\n        fetch_notes();\r\n    }, [subjectId]);\r\n\r\n    const handler_note_click = async (note) => {\r\n        try {\r\n            const id = note.id ?? note.note_id;\r\n            const resp = await fetch(`http://localhost:5019/notes/${id}`, { credentials: \"include\" });\r\n            if (!resp.ok) return;\r\n\r\n            const selected_note = await resp.json();\r\n            const fullNote = {\r\n                ...selected_note,\r\n                subject_id: subjectId,\r\n                subject_name: selected_category?.name,\r\n                tag_id: selected_note.tag_id ? parseInt(selected_note.tag_id) : null // Asiguram ca e numar\r\n            };\r\n\r\n            setCurrentNote(fullNote);\r\n            lastSavedState.current = fullNote;\r\n        } catch (err) {\r\n            console.error(\"Eroare la click notita:\", err);\r\n        }\r\n    };\r\n\r\n    const handler_create_note = async () => {\r\n        setter_creating_note(true);\r\n        try {\r\n            const resp = await fetch('http://localhost:5019/notes', {\r\n                method: 'POST',\r\n                credentials: 'include',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    title: 'New Note',\r\n                    subject_id: subjectId,\r\n                    description: '',\r\n                    markdown_content: '',\r\n                })\r\n            });\r\n\r\n            if (resp.ok) {\r\n                const new_note = await resp.json();\r\n                const withSubject = { ...new_note, subject_id: subjectId, subject_name: selected_category?.name };\r\n                setter_notes(prev => [withSubject, ...prev]);\r\n                setCurrentNote(withSubject);\r\n                lastSavedState.current = withSubject;\r\n            }\r\n        } catch (err) { console.error(err); } \r\n        finally { setter_creating_note(false); }\r\n    };\r\n\r\n\r\n    const handler_delete_note = async (noteId, e) => {\r\n        e.stopPropagation();\r\n        if (!window.confirm('Stergi notita?')) return;\r\n        setDeletingNoteId(noteId);\r\n        try {\r\n            const resp = await fetch(`http://localhost:5019/notes/${noteId}`, { method: \"DELETE\", credentials: \"include\" });\r\n            if (resp.ok) {\r\n                setter_notes(prev => prev.filter(n => (n.id ?? n.note_id) !== noteId));\r\n                if (current_note?.id === noteId) setCurrentNote(null);\r\n            }\r\n        } catch (err) { console.error(err); } \r\n        finally { setDeletingNoteId(null); }\r\n    };\r\n\r\n\r\n    const handler_delete_subject = async () => {\r\n        if (!window.confirm(`Stergi subiectul \"${selected_category.name}\" si toate notitele?`)) return;\r\n        try {\r\n            const resp = await fetch(`http://localhost:5019/subjects/${subjectId}`, { method: \"DELETE\", credentials: \"include\" });\r\n            if (resp.ok) {\r\n                \r\n                setter_subjects(prev => prev.filter(s => (s.id ?? s.subject_id) !== subjectId));\r\n                setter_selected_categories(null); \r\n            }\r\n        } catch (err) { console.error(err); }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!current_note?.id) return;\r\n        if (saveTimer.current) clearTimeout(saveTimer.current);\r\n\r\n        saveTimer.current = setTimeout(async () => {\r\n            if (lastSavedState.current &&\r\n                current_note.title === lastSavedState.current.title &&\r\n                current_note.description === lastSavedState.current.description &&\r\n                current_note.markdown_content === lastSavedState.current.markdown_content &&\r\n                current_note.course_date === lastSavedState.current.course_date &&\r\n                current_note.tag_id === lastSavedState.current.tag_id // <--- IMPORTANT: Verificam TAG\r\n            ) { return; }\r\n\r\n            try {\r\n                const resp = await fetch(`http://localhost:5019/notes/${current_note.id}`, {\r\n                    method: 'PUT',\r\n                    credentials: 'include',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        title: current_note.title,\r\n                        description: current_note.description || '',\r\n                        content: current_note.markdown_content,\r\n                        course_date: current_note.course_date,\r\n                        subject_id: subjectId,\r\n                        tag_id: current_note.tag_id || null // <--- IMPORTANT: Trimitem TAG\r\n                    })\r\n                });\r\n\r\n                if (resp.ok) {\r\n                    const updated = await resp.json();\r\n                    const merged = { ...current_note, ...updated };\r\n                    \r\n                    lastSavedState.current = merged;\r\n                    setter_notes(prev => prev.map(n => (n.id ?? n.note_id) === merged.id ? merged : n));\r\n                }\r\n            } catch (e) { console.error('Autosave error', e); }\r\n        }, 800); \r\n\r\n        return () => clearTimeout(saveTimer.current);\r\n    }, [current_note]); \r\n\r\n    // --- VIEW 1\r\n    if (current_note) {\r\n        return (\r\n            <div className=\"flex-1 bg-gray-50 p-6 overflow-auto h-full\">\r\n                <button onClick={() => setCurrentNote(null)} className=\"mb-4 px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded flex items-center gap-1\">\r\n                    ‚Üê Back to List\r\n                </button>\r\n\r\n                <div className=\"bg-white rounded-lg shadow-sm border p-6 space-y-6\">\r\n                    {/* Header: Titlu si Tag */}\r\n                    <div className=\"flex gap-6 items-end\">\r\n                        <div className=\"flex-1\">\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Title</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={current_note.title || ''}\r\n                                onChange={(e) => setCurrentNote(prev => ({ ...prev, title: e.target.value }))}\r\n                                className=\"w-full text-2xl font-bold border-b-2 border-gray-200 focus:border-[#4E8DC4] outline-none pb-2\"\r\n                                placeholder=\"Note title...\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"w-1/4 min-w-[150px]\">\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Tag</label>\r\n                            <select\r\n                                value={current_note.tag_id || \"\"}\r\n                                onChange={(e) => {\r\n                                    const val = e.target.value;\r\n                                    setCurrentNote(prev => ({ \r\n                                        ...prev, \r\n                                        tag_id: val === \"\" ? null : parseInt(val) \r\n                                    }));\r\n                                }}\r\n                                className=\"w-full text-lg border-b-2 border-gray-200 pb-2 bg-transparent focus:border-[#4E8DC4] outline-none cursor-pointer\"\r\n                            >\r\n                                <option value=\"\">-- Select --</option>\r\n                                <option value=\"1\">Curs</option>\r\n                                <option value=\"2\">Seminar</option>\r\n                                <option value=\"3\">Diverse</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-4\">\r\n                        <div className=\"flex-1\">\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={current_note.description || ''}\r\n                                onChange={(e) => setCurrentNote(prev => ({ ...prev, description: e.target.value }))}\r\n                                className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4E8DC4] outline-none\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"w-48\">\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Course Date</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                value={current_note.course_date || ''}\r\n                                onChange={(e) => setCurrentNote(prev => ({ ...prev, course_date: e.target.value }))}\r\n                                className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4E8DC4] outline-none\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Content */}\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Content</label>\r\n                        <textarea\r\n                            value={current_note.markdown_content || ''}\r\n                            onChange={(e) => setCurrentNote(prev => ({ ...prev, markdown_content: e.target.value }))}\r\n                            rows={16}\r\n                            className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#4E8DC4] outline-none font-mono text-sm\"\r\n                            placeholder=\"Start typing...\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // --- VIEW 2\r\n    return (\r\n        <div className=\"flex-1 bg-gray-50 p-6 overflow-auto h-full\">\r\n            <div className=\"mb-6 flex justify-between items-start\">\r\n                <div>\r\n                    <h2 className=\"text-xl font-bold text-gray-800\">{selected_category.name}</h2>\r\n                    <p className=\"text-gray-500 text-sm\">{notes.length} notes</p>\r\n                </div>\r\n                <button onClick={handler_delete_subject} className=\"text-red-500 hover:bg-red-50 p-2 rounded\" title=\"Delete Subject\">\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\r\n                </button>\r\n            </div>\r\n\r\n            <button\r\n                onClick={handler_create_note}\r\n                disabled={creating_note}\r\n                className=\"mb-6 w-full py-2 bg-[#4E8DC4] text-white rounded-lg hover:bg-[#3b78a2] transition flex justify-center gap-2 items-center\"\r\n            >\r\n                {creating_note ? \"Creating...\" : \"+ New Note\"}\r\n            </button>\r\n\r\n            {loading ? <p className=\"text-center text-gray-500\">Loading notes...</p> : (\r\n                <ul className=\"space-y-3\">\r\n                    {notes.map(note => {\r\n                        const noteId = note.id ?? note.note_id;\r\n                        return (\r\n                            <li key={noteId} onClick={() => handler_note_click(note)} className=\"bg-white p-4 rounded-lg shadow-sm border hover:border-[#4E8DC4] cursor-pointer group\">\r\n                                <div className=\"flex justify-between items-start mb-2\">\r\n                                    <div className=\"flex-1\">\r\n                                        <div className=\"flex items-center gap-2 flex-wrap\">\r\n                                            <h3 className=\"font-semibold text-gray-800\">{note.title || 'Untitled'}</h3>\r\n                                            \r\n                                            {note.tag_name && (\r\n                                                <span className=\"bg-blue-100 text-[#4E8DC4] text-xs px-2 py-0.5 rounded-full border border-blue-200 font-medium\">\r\n                                                    {note.tag_name}\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                        {note.description && <p className=\"text-sm text-gray-500 mt-1\">{note.description}</p>}\r\n                                    </div>\r\n                                    <button onClick={(e) => handler_delete_note(noteId, e)} className=\"text-red-500 hover:text-red-700 ml-2\">\r\n                                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"mt-2 pt-2 border-t flex justify-between text-xs text-gray-400\">\r\n                                    \r\n                                    <span>\r\n                                        {note.course_date ? (\r\n                                            <span className=\"flex items-center gap-1 text-[#4E8DC4]\">\r\n                                                 {note.course_date}\r\n                                            </span>\r\n                                        ) : \"No date\"}\r\n                                    </span>\r\n                                    <span>Updated: {new Date(note.updated_at).toLocaleDateString()}</span>\r\n                                </div>\r\n                            </li>\r\n                        )\r\n                    })}\r\n                </ul>\r\n            )}\r\n            {notes.length === 0 && !loading && <div className=\"text-center text-gray-400 mt-10\">No notes in this subject yet.</div>}\r\n        </div>\r\n    );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpE,eAAe,SAASC,eAAeA,CAAC;EAAEC,iBAAiB;EAAEC,eAAe;EAAEC;AAA2B,CAAC,EAAE;EAAAC,EAAA;EAExG,MAAM,CAACC,KAAK,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACU,OAAO,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACY,aAAa,EAAEC,oBAAoB,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACc,YAAY,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACrD,MAAM,CAACgB,cAAc,EAAEC,iBAAiB,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAE1D,MAAMkB,SAAS,GAAGnB,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMoB,cAAc,GAAGpB,MAAM,CAAC,IAAI,CAAC;EAEnC,MAAMqB,SAAS,GAAGtB,OAAO,CAAC;IAAA,IAAAuB,qBAAA;IAAA,QAAAA,qBAAA,GAAMjB,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEkB,EAAE,cAAAD,qBAAA,cAAAA,qBAAA,GAAIjB,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEmB,UAAU;EAAA,GAAE,CAACnB,iBAAiB,CAAC,CAAC;EAE5GP,SAAS,CAAC,MAAM;IACZ,MAAM2B,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI,CAACJ,SAAS,EAAE;MAChBT,cAAc,CAAC,IAAI,CAAC;MACpB,IAAI;QACA,MAAMc,IAAI,GAAG,MAAMC,KAAK,CAAC,kCAAkCN,SAAS,EAAE,EAAE;UAAEO,WAAW,EAAE;QAAU,CAAC,CAAC;QACnG,IAAIF,IAAI,CAACG,EAAE,EAAE;UACT,MAAMC,IAAI,GAAG,MAAMJ,IAAI,CAACK,IAAI,CAAC,CAAC;UAC9BrB,YAAY,CAACsB,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE,CAAC;QACjD;MACJ,CAAC,CAAC,OAAOI,GAAG,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;MAChD,CAAC,SAAS;QACNtB,cAAc,CAAC,KAAK,CAAC;MACzB;IACJ,CAAC;IACDa,WAAW,CAAC,CAAC;EACjB,CAAC,EAAE,CAACJ,SAAS,CAAC,CAAC;EAEf,MAAMgB,kBAAkB,GAAG,MAAOC,IAAI,IAAK;IACvC,IAAI;MAAA,IAAAC,QAAA;MACA,MAAMhB,EAAE,IAAAgB,QAAA,GAAGD,IAAI,CAACf,EAAE,cAAAgB,QAAA,cAAAA,QAAA,GAAID,IAAI,CAACE,OAAO;MAClC,MAAMd,IAAI,GAAG,MAAMC,KAAK,CAAC,+BAA+BJ,EAAE,EAAE,EAAE;QAAEK,WAAW,EAAE;MAAU,CAAC,CAAC;MACzF,IAAI,CAACF,IAAI,CAACG,EAAE,EAAE;MAEd,MAAMY,aAAa,GAAG,MAAMf,IAAI,CAACK,IAAI,CAAC,CAAC;MACvC,MAAMW,QAAQ,GAAG;QACb,GAAGD,aAAa;QAChBjB,UAAU,EAAEH,SAAS;QACrBsB,YAAY,EAAEtC,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEuC,IAAI;QACrCC,MAAM,EAAEJ,aAAa,CAACI,MAAM,GAAGC,QAAQ,CAACL,aAAa,CAACI,MAAM,CAAC,GAAG,IAAI,CAAC;MACzE,CAAC;MAED7B,cAAc,CAAC0B,QAAQ,CAAC;MACxBtB,cAAc,CAAC2B,OAAO,GAAGL,QAAQ;IACrC,CAAC,CAAC,OAAOR,GAAG,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;IACjD;EACJ,CAAC;EAED,MAAMc,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACpClC,oBAAoB,CAAC,IAAI,CAAC;IAC1B,IAAI;MACA,MAAMY,IAAI,GAAG,MAAMC,KAAK,CAAC,6BAA6B,EAAE;QACpDsB,MAAM,EAAE,MAAM;QACdrB,WAAW,EAAE,SAAS;QACtBsB,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACjBC,KAAK,EAAE,UAAU;UACjB9B,UAAU,EAAEH,SAAS;UACrBkC,WAAW,EAAE,EAAE;UACfC,gBAAgB,EAAE;QACtB,CAAC;MACL,CAAC,CAAC;MAEF,IAAI9B,IAAI,CAACG,EAAE,EAAE;QACT,MAAM4B,QAAQ,GAAG,MAAM/B,IAAI,CAACK,IAAI,CAAC,CAAC;QAClC,MAAM2B,WAAW,GAAG;UAAE,GAAGD,QAAQ;UAAEjC,UAAU,EAAEH,SAAS;UAAEsB,YAAY,EAAEtC,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEuC;QAAK,CAAC;QACjGlC,YAAY,CAACiD,IAAI,IAAI,CAACD,WAAW,EAAE,GAAGC,IAAI,CAAC,CAAC;QAC5C3C,cAAc,CAAC0C,WAAW,CAAC;QAC3BtC,cAAc,CAAC2B,OAAO,GAAGW,WAAW;MACxC;IACJ,CAAC,CAAC,OAAOxB,GAAG,EAAE;MAAEC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAAE,CAAC,SAC7B;MAAEpB,oBAAoB,CAAC,KAAK,CAAC;IAAE;EAC3C,CAAC;EAGD,MAAM8C,mBAAmB,GAAG,MAAAA,CAAOC,MAAM,EAAEC,CAAC,KAAK;IAC7CA,CAAC,CAACC,eAAe,CAAC,CAAC;IACnB,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,gBAAgB,CAAC,EAAE;IACvC/C,iBAAiB,CAAC2C,MAAM,CAAC;IACzB,IAAI;MACA,MAAMnC,IAAI,GAAG,MAAMC,KAAK,CAAC,+BAA+BkC,MAAM,EAAE,EAAE;QAAEZ,MAAM,EAAE,QAAQ;QAAErB,WAAW,EAAE;MAAU,CAAC,CAAC;MAC/G,IAAIF,IAAI,CAACG,EAAE,EAAE;QACTnB,YAAY,CAACiD,IAAI,IAAIA,IAAI,CAACO,MAAM,CAACC,CAAC;UAAA,IAAAC,KAAA;UAAA,OAAI,EAAAA,KAAA,GAACD,CAAC,CAAC5C,EAAE,cAAA6C,KAAA,cAAAA,KAAA,GAAID,CAAC,CAAC3B,OAAO,MAAMqB,MAAM;QAAA,EAAC,CAAC;QACtE,IAAI,CAAA9C,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEQ,EAAE,MAAKsC,MAAM,EAAE7C,cAAc,CAAC,IAAI,CAAC;MACzD;IACJ,CAAC,CAAC,OAAOkB,GAAG,EAAE;MAAEC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAAE,CAAC,SAC7B;MAAEhB,iBAAiB,CAAC,IAAI,CAAC;IAAE;EACvC,CAAC;EAGD,MAAMmD,sBAAsB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAI,CAACL,MAAM,CAACC,OAAO,CAAC,qBAAqB5D,iBAAiB,CAACuC,IAAI,sBAAsB,CAAC,EAAE;IACxF,IAAI;MACA,MAAMlB,IAAI,GAAG,MAAMC,KAAK,CAAC,kCAAkCN,SAAS,EAAE,EAAE;QAAE4B,MAAM,EAAE,QAAQ;QAAErB,WAAW,EAAE;MAAU,CAAC,CAAC;MACrH,IAAIF,IAAI,CAACG,EAAE,EAAE;QAETvB,eAAe,CAACqD,IAAI,IAAIA,IAAI,CAACO,MAAM,CAACI,CAAC;UAAA,IAAAC,KAAA;UAAA,OAAI,EAAAA,KAAA,GAACD,CAAC,CAAC/C,EAAE,cAAAgD,KAAA,cAAAA,KAAA,GAAID,CAAC,CAAC9C,UAAU,MAAMH,SAAS;QAAA,EAAC,CAAC;QAC/Ed,0BAA0B,CAAC,IAAI,CAAC;MACpC;IACJ,CAAC,CAAC,OAAO2B,GAAG,EAAE;MAAEC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAAE;EACxC,CAAC;EAEDpC,SAAS,CAAC,MAAM;IACZ,IAAI,EAACiB,YAAY,aAAZA,YAAY,eAAZA,YAAY,CAAEQ,EAAE,GAAE;IACvB,IAAIJ,SAAS,CAAC4B,OAAO,EAAEyB,YAAY,CAACrD,SAAS,CAAC4B,OAAO,CAAC;IAEtD5B,SAAS,CAAC4B,OAAO,GAAG0B,UAAU,CAAC,YAAY;MACvC,IAAIrD,cAAc,CAAC2B,OAAO,IACtBhC,YAAY,CAACuC,KAAK,KAAKlC,cAAc,CAAC2B,OAAO,CAACO,KAAK,IACnDvC,YAAY,CAACwC,WAAW,KAAKnC,cAAc,CAAC2B,OAAO,CAACQ,WAAW,IAC/DxC,YAAY,CAACyC,gBAAgB,KAAKpC,cAAc,CAAC2B,OAAO,CAACS,gBAAgB,IACzEzC,YAAY,CAAC2D,WAAW,KAAKtD,cAAc,CAAC2B,OAAO,CAAC2B,WAAW,IAC/D3D,YAAY,CAAC8B,MAAM,KAAKzB,cAAc,CAAC2B,OAAO,CAACF,MAAM,CAAC;MAAA,EACxD;QAAE;MAAQ;MAEZ,IAAI;QACA,MAAMnB,IAAI,GAAG,MAAMC,KAAK,CAAC,+BAA+BZ,YAAY,CAACQ,EAAE,EAAE,EAAE;UACvE0B,MAAM,EAAE,KAAK;UACbrB,WAAW,EAAE,SAAS;UACtBsB,OAAO,EAAE;YAAE,cAAc,EAAE;UAAmB,CAAC;UAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACjBC,KAAK,EAAEvC,YAAY,CAACuC,KAAK;YACzBC,WAAW,EAAExC,YAAY,CAACwC,WAAW,IAAI,EAAE;YAC3CoB,OAAO,EAAE5D,YAAY,CAACyC,gBAAgB;YACtCkB,WAAW,EAAE3D,YAAY,CAAC2D,WAAW;YACrClD,UAAU,EAAEH,SAAS;YACrBwB,MAAM,EAAE9B,YAAY,CAAC8B,MAAM,IAAI,IAAI,CAAC;UACxC,CAAC;QACL,CAAC,CAAC;QAEF,IAAInB,IAAI,CAACG,EAAE,EAAE;UACT,MAAM+C,OAAO,GAAG,MAAMlD,IAAI,CAACK,IAAI,CAAC,CAAC;UACjC,MAAM8C,MAAM,GAAG;YAAE,GAAG9D,YAAY;YAAE,GAAG6D;UAAQ,CAAC;UAE9CxD,cAAc,CAAC2B,OAAO,GAAG8B,MAAM;UAC/BnE,YAAY,CAACiD,IAAI,IAAIA,IAAI,CAACmB,GAAG,CAACX,CAAC;YAAA,IAAAY,MAAA;YAAA,OAAI,EAAAA,MAAA,GAACZ,CAAC,CAAC5C,EAAE,cAAAwD,MAAA,cAAAA,MAAA,GAAIZ,CAAC,CAAC3B,OAAO,MAAMqC,MAAM,CAACtD,EAAE,GAAGsD,MAAM,GAAGV,CAAC;UAAA,EAAC,CAAC;QACvF;MACJ,CAAC,CAAC,OAAOL,CAAC,EAAE;QAAE3B,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAE0B,CAAC,CAAC;MAAE;IACtD,CAAC,EAAE,GAAG,CAAC;IAEP,OAAO,MAAMU,YAAY,CAACrD,SAAS,CAAC4B,OAAO,CAAC;EAChD,CAAC,EAAE,CAAChC,YAAY,CAAC,CAAC;;EAElB;EACA,IAAIA,YAAY,EAAE;IACd,oBACIZ,OAAA;MAAK6E,SAAS,EAAC,4CAA4C;MAAAC,QAAA,gBACvD9E,OAAA;QAAQ+E,OAAO,EAAEA,CAAA,KAAMlE,cAAc,CAAC,IAAI,CAAE;QAACgE,SAAS,EAAC,sFAAsF;QAAAC,QAAA,EAAC;MAE9I;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAETnF,OAAA;QAAK6E,SAAS,EAAC,oDAAoD;QAAAC,QAAA,gBAE/D9E,OAAA;UAAK6E,SAAS,EAAC,sBAAsB;UAAAC,QAAA,gBACjC9E,OAAA;YAAK6E,SAAS,EAAC,QAAQ;YAAAC,QAAA,gBACnB9E,OAAA;cAAO6E,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAAK;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC7EnF,OAAA;cACIoF,IAAI,EAAC,MAAM;cACXC,KAAK,EAAEzE,YAAY,CAACuC,KAAK,IAAI,EAAG;cAChCmC,QAAQ,EAAG3B,CAAC,IAAK9C,cAAc,CAAC2C,IAAI,KAAK;gBAAE,GAAGA,IAAI;gBAAEL,KAAK,EAAEQ,CAAC,CAAC4B,MAAM,CAACF;cAAM,CAAC,CAAC,CAAE;cAC9ER,SAAS,EAAC,+FAA+F;cACzGW,WAAW,EAAC;YAAe;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAENnF,OAAA;YAAK6E,SAAS,EAAC,qBAAqB;YAAAC,QAAA,gBAChC9E,OAAA;cAAO6E,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAAG;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC3EnF,OAAA;cACIqF,KAAK,EAAEzE,YAAY,CAAC8B,MAAM,IAAI,EAAG;cACjC4C,QAAQ,EAAG3B,CAAC,IAAK;gBACb,MAAM8B,GAAG,GAAG9B,CAAC,CAAC4B,MAAM,CAACF,KAAK;gBAC1BxE,cAAc,CAAC2C,IAAI,KAAK;kBACpB,GAAGA,IAAI;kBACPd,MAAM,EAAE+C,GAAG,KAAK,EAAE,GAAG,IAAI,GAAG9C,QAAQ,CAAC8C,GAAG;gBAC5C,CAAC,CAAC,CAAC;cACP,CAAE;cACFZ,SAAS,EAAC,kHAAkH;cAAAC,QAAA,gBAE5H9E,OAAA;gBAAQqF,KAAK,EAAC,EAAE;gBAAAP,QAAA,EAAC;cAAY;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACtCnF,OAAA;gBAAQqF,KAAK,EAAC,GAAG;gBAAAP,QAAA,EAAC;cAAI;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAC/BnF,OAAA;gBAAQqF,KAAK,EAAC,GAAG;gBAAAP,QAAA,EAAC;cAAO;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAClCnF,OAAA;gBAAQqF,KAAK,EAAC,GAAG;gBAAAP,QAAA,EAAC;cAAO;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAENnF,OAAA;UAAK6E,SAAS,EAAC,YAAY;UAAAC,QAAA,gBACvB9E,OAAA;YAAK6E,SAAS,EAAC,QAAQ;YAAAC,QAAA,gBACnB9E,OAAA;cAAO6E,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAAW;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACnFnF,OAAA;cACIoF,IAAI,EAAC,MAAM;cACXC,KAAK,EAAEzE,YAAY,CAACwC,WAAW,IAAI,EAAG;cACtCkC,QAAQ,EAAG3B,CAAC,IAAK9C,cAAc,CAAC2C,IAAI,KAAK;gBAAE,GAAGA,IAAI;gBAAEJ,WAAW,EAAEO,CAAC,CAAC4B,MAAM,CAACF;cAAM,CAAC,CAAC,CAAE;cACpFR,SAAS,EAAC;YAAmF;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eACNnF,OAAA;YAAK6E,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACjB9E,OAAA;cAAO6E,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAAW;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACnFnF,OAAA;cACIoF,IAAI,EAAC,MAAM;cACXC,KAAK,EAAEzE,YAAY,CAAC2D,WAAW,IAAI,EAAG;cACtCe,QAAQ,EAAG3B,CAAC,IAAK9C,cAAc,CAAC2C,IAAI,KAAK;gBAAE,GAAGA,IAAI;gBAAEe,WAAW,EAAEZ,CAAC,CAAC4B,MAAM,CAACF;cAAM,CAAC,CAAC,CAAE;cACpFR,SAAS,EAAC;YAAmF;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAGNnF,OAAA;UAAA8E,QAAA,gBACI9E,OAAA;YAAO6E,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAAO;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC/EnF,OAAA;YACIqF,KAAK,EAAEzE,YAAY,CAACyC,gBAAgB,IAAI,EAAG;YAC3CiC,QAAQ,EAAG3B,CAAC,IAAK9C,cAAc,CAAC2C,IAAI,KAAK;cAAE,GAAGA,IAAI;cAAEH,gBAAgB,EAAEM,CAAC,CAAC4B,MAAM,CAACF;YAAM,CAAC,CAAC,CAAE;YACzFK,IAAI,EAAE,EAAG;YACTb,SAAS,EAAC,qGAAqG;YAC/GW,WAAW,EAAC;UAAiB;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAEd;;EAEA;EACA,oBACInF,OAAA;IAAK6E,SAAS,EAAC,4CAA4C;IAAAC,QAAA,gBACvD9E,OAAA;MAAK6E,SAAS,EAAC,uCAAuC;MAAAC,QAAA,gBAClD9E,OAAA;QAAA8E,QAAA,gBACI9E,OAAA;UAAI6E,SAAS,EAAC,iCAAiC;UAAAC,QAAA,EAAE5E,iBAAiB,CAACuC;QAAI;UAAAuC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC7EnF,OAAA;UAAG6E,SAAS,EAAC,uBAAuB;UAAAC,QAAA,GAAExE,KAAK,CAACqF,MAAM,EAAC,QAAM;QAAA;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5D,CAAC,eACNnF,OAAA;QAAQ+E,OAAO,EAAEb,sBAAuB;QAACW,SAAS,EAAC,0CAA0C;QAAC1B,KAAK,EAAC,gBAAgB;QAAA2B,QAAA,eAChH9E,OAAA;UAAK6E,SAAS,EAAC,SAAS;UAACe,IAAI,EAAC,MAAM;UAACC,MAAM,EAAC,cAAc;UAACC,OAAO,EAAC,WAAW;UAAAhB,QAAA,eAAC9E,OAAA;YAAM+F,aAAa,EAAC,OAAO;YAACC,cAAc,EAAC,OAAO;YAACC,WAAW,EAAE,CAAE;YAACC,CAAC,EAAC;UAA8H;YAAAlB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvR,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,eAENnF,OAAA;MACI+E,OAAO,EAAElC,mBAAoB;MAC7BsD,QAAQ,EAAEzF,aAAc;MACxBmE,SAAS,EAAC,0HAA0H;MAAAC,QAAA,EAEnIpE,aAAa,GAAG,aAAa,GAAG;IAAY;MAAAsE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzC,CAAC,EAER3E,OAAO,gBAAGR,OAAA;MAAG6E,SAAS,EAAC,2BAA2B;MAAAC,QAAA,EAAC;IAAgB;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,gBACpEnF,OAAA;MAAI6E,SAAS,EAAC,WAAW;MAAAC,QAAA,EACpBxE,KAAK,CAACqE,GAAG,CAACxC,IAAI,IAAI;QAAA,IAAAiE,SAAA;QACf,MAAM1C,MAAM,IAAA0C,SAAA,GAAGjE,IAAI,CAACf,EAAE,cAAAgF,SAAA,cAAAA,SAAA,GAAIjE,IAAI,CAACE,OAAO;QACtC,oBACIrC,OAAA;UAAiB+E,OAAO,EAAEA,CAAA,KAAM7C,kBAAkB,CAACC,IAAI,CAAE;UAAC0C,SAAS,EAAC,sFAAsF;UAAAC,QAAA,gBACtJ9E,OAAA;YAAK6E,SAAS,EAAC,uCAAuC;YAAAC,QAAA,gBAClD9E,OAAA;cAAK6E,SAAS,EAAC,QAAQ;cAAAC,QAAA,gBACnB9E,OAAA;gBAAK6E,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,gBAC9C9E,OAAA;kBAAI6E,SAAS,EAAC,6BAA6B;kBAAAC,QAAA,EAAE3C,IAAI,CAACgB,KAAK,IAAI;gBAAU;kBAAA6B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,EAE1EhD,IAAI,CAACkE,QAAQ,iBACVrG,OAAA;kBAAM6E,SAAS,EAAC,gGAAgG;kBAAAC,QAAA,EAC3G3C,IAAI,CAACkE;gBAAQ;kBAAArB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACZ,CACT;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACA,CAAC,EACLhD,IAAI,CAACiB,WAAW,iBAAIpD,OAAA;gBAAG6E,SAAS,EAAC,4BAA4B;gBAAAC,QAAA,EAAE3C,IAAI,CAACiB;cAAW;gBAAA4B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpF,CAAC,eACNnF,OAAA;cAAQ+E,OAAO,EAAGpB,CAAC,IAAKF,mBAAmB,CAACC,MAAM,EAAEC,CAAC,CAAE;cAACkB,SAAS,EAAC,sCAAsC;cAAAC,QAAA,eACpG9E,OAAA;gBAAK6E,SAAS,EAAC,SAAS;gBAACe,IAAI,EAAC,MAAM;gBAACC,MAAM,EAAC,cAAc;gBAACC,OAAO,EAAC,WAAW;gBAAAhB,QAAA,eAAC9E,OAAA;kBAAM+F,aAAa,EAAC,OAAO;kBAACC,cAAc,EAAC,OAAO;kBAACC,WAAW,EAAE,CAAE;kBAACC,CAAC,EAAC;gBAA8H;kBAAAlB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvR,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC,eACNnF,OAAA;YAAK6E,SAAS,EAAC,+DAA+D;YAAAC,QAAA,gBAE1E9E,OAAA;cAAA8E,QAAA,EACK3C,IAAI,CAACoC,WAAW,gBACbvE,OAAA;gBAAM6E,SAAS,EAAC,wCAAwC;gBAAAC,QAAA,EAClD3C,IAAI,CAACoC;cAAW;gBAAAS,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChB,CAAC,GACP;YAAS;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACX,CAAC,eACPnF,OAAA;cAAA8E,QAAA,GAAM,WAAS,EAAC,IAAIwB,IAAI,CAACnE,IAAI,CAACoE,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC;YAAA;cAAAxB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrE,CAAC;QAAA,GA5BDzB,MAAM;UAAAsB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OA6BX,CAAC;MAEb,CAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CACP,EACA7E,KAAK,CAACqF,MAAM,KAAK,CAAC,IAAI,CAACnF,OAAO,iBAAIR,OAAA;MAAK6E,SAAS,EAAC,iCAAiC;MAAAC,QAAA,EAAC;IAA6B;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtH,CAAC;AAEd;AAAC9E,EAAA,CAnSuBJ,eAAe;AAAAwG,EAAA,GAAfxG,eAAe;AAAA,IAAAwG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}